#!/bin/bash

mapfile -d ' ' -t files < <(echo "$@")

slowa=0
linie=0
liczby=0

slowa_total=0
linie_total=0
liczby_total=0

liczby_regex="[0-9]+"
slowa_regex="[a-zA-Z]+"

for i in "${files[@]}"; do
    i=$(echo "$i" | xargs)
    if [ -f "$i" ]; then
        while read -r line; do
            ((linie++))
            if [[ "$line" =~ $slowa_regex ]]; then
                ((slowa++))
            fi
            if [[ "$line" =~ $liczby_regex ]]; then
                ((liczby++))
            fi
        done <"$i"
        ((slowa_total += slowa))
        ((linie_total += linie))
        ((liczby_total += liczby))
        echo "W pliku $i mamy $slowa słowa i $linie linii i $liczby liczb"
        ((slowa = 0))
        ((linie = 0))
        ((liczby = 0))
    else
        echo "Nazwa $i to nie nazwa pliku"
    fi
done
echo ""
echo "W sumie mamy $slowa słowa i $linie linii i $liczby liczb"
echo "W sumie długość wszystkich plików w bajtach to $(du -b "$@" | tail -n 1 | cut -f 1)"
